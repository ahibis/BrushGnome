var fe=Object.defineProperty;var he=(a,t,s)=>t in a?fe(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;var D=(a,t,s)=>(he(a,typeof t!="symbol"?t+"":t,s),s);import{r as H,o as g,c as A,a as l,V as ce,u as T,b as ee,w as i,d as h,e as X,f as I,F,g as b,C as ge,p as we,h as ve,i as xe,L as oe,j as ye,P as ue,k as Se,B as _e,l as Q,m as C,n as be,q as z,s as le,t as Z,v as Ve,x as G,y as ne,z as x,A as E,D as N,E as q,G as me,H as ae,I as ie,J as pe,K as te,M as Ie,N as Ce,O as ke,Q as Ue,R as De,S as Pe,T as $e,U as Ee,W as J,X as Ne,Y as Le,Z as Ae,_ as Te,$ as Be}from"./vendor.29c62639.js";const Fe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}};Fe();class Ft extends PIXI.Container{constructor(){super(...arguments);D(this,"Name","layer");D(this,"type","layer")}get r(){return(this.tint&16711680)/65536,(this.tint&16711680)/65536}set r(t){let s=t%256*65536+(65535&this.tint);this.tint=s}get g(){return(this.tint&65280)/256}set g(t){this.tint=t%256*256+(16711935&this.tint)}get b(){return this.tint&255}set b(t){this.tint=t%256+(16776960&this.tint)}}class se extends PIXI.Sprite{constructor(){super(...arguments);D(this,"Name","picture");D(this,"type","sprite")}get r(){return(this.tint&16711680)/65536,(this.tint&16711680)/65536}set r(t){let s=t%256*65536+(65535&this.tint);this.tint=s}get g(){return(this.tint&65280)/256}set g(t){this.tint=t%256*256+(16711935&this.tint)}get b(){return this.tint&255}set b(t){this.tint=t%256+(16776960&this.tint)}pixels(){const t=this.texture.textureCacheIds[0],s=new se;s.src=t,s.onload=function(){}}}class Me{constructor(t,s){D(this,"sprites",[]);D(this,"textures",[]);D(this,"width",1080);D(this,"height",768);D(this,"ctx");D(this,"view");D(this,"app");D(this,"room");D(this,"extract");D(this,"_sprites",0);this.sprites=s;const n=new PIXI.Application({width:this.width,height:this.height,transparent:!0,resolution:window.devicePixelRatio||1});this.extract=n.renderer.extract,this.app=n,this.view=n.view;const{stage:e}=n;this.stage=e;const r=e;r.Name="Main layer",r.id=0,this.room=r,s.push({Name:"Main layer",type:"layer",id:0}),this.ctx=this.view.getContext("webgl2"),t.appendChild(n.view)}async loadPixels(t){let{width:s,height:n}=t;const e=document.createElement("canvas");e.width=s,e.height=n;const r=e.getContext("2d");return r.drawImage(t,0,0,s,n),await r.getImageData(0,0,s,n).data}loadImg(t){return new Promise((s,n)=>{let e=new Image;e.src=t,e.onload=r=>{s(e)}})}pixels(){return this.extract.pixels(this.app.stage)}pixelsToHistogram(t){const s=_.map(_.range(256),r=>0);let n=[s.slice(),s.slice(),s.slice(),s.slice()],e;for(let r=0;r<t.length;r+=1)r%4!=3&&~~(r/4)*4+3!=0&&(e=t[r],n[r%4][e]+=1,n[3][e]+=1);return n}histogram(){const t=this.pixels();return this.pixelsToHistogram(t)}saveFile(t,s="outImg"){let n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",s),n.click()}downImg(){const t=this.extract.image(this.app.stage);this.saveFile(t.src)}addSprite(t){const{textures:s,sprites:n,room:e}=this,r=PIXI.Texture.from(t);s.push(r),this._sprites+=1;const o=new se(r);o.id=this._sprites,n.push(o),e.addChild(o)}}const Oe=b(" width "),ze=b(" height "),Re=b(" red "),Xe=b(" green "),je=b(" blue "),He=b(" alpha "),Ge=b(" x "),Ke=b(" y "),qe={props:["selectedSprite"],setup(a){const t=H([{title:"normal",value:PIXI.BLEND_MODES.NORMAL},{title:"add",value:PIXI.BLEND_MODES.ADD},{title:"multiply",value:PIXI.BLEND_MODES.MULTIPLY},{title:"average",value:PIXI.BLEND_MODES.SCREEN}]);return(s,n)=>(g(),A(F,null,[l(ce,{label:"name",modelValue:a.selectedSprite.Name,"onUpdate:modelValue":n[0]||(n[0]=e=>a.selectedSprite.Name=e),"hide-details":""},null,8,["modelValue"]),l(ee,{label:"blend mode",items:T(t),modelValue:a.selectedSprite.blendMode,"onUpdate:modelValue":n[1]||(n[1]=e=>a.selectedSprite.blendMode=e),"hide-details":""},null,8,["items","modelValue"]),l(I,null,{default:i(()=>[l(h,{sm:"3"},{default:i(()=>[Oe]),_:1}),l(h,null,{default:i(()=>[l(X,{min:"0",max:"1080",step:"5","thumb-label":"","hide-details":"auto",color:"blue",modelValue:a.selectedSprite.width,"onUpdate:modelValue":n[2]||(n[2]=e=>a.selectedSprite.width=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(I,null,{default:i(()=>[l(h,{sm:"3"},{default:i(()=>[ze]),_:1}),l(h,null,{default:i(()=>[l(X,{min:"0",max:"1080",step:"5","thumb-label":"",color:"blue","hide-details":"auto",modelValue:a.selectedSprite.height,"onUpdate:modelValue":n[3]||(n[3]=e=>a.selectedSprite.height=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(I,null,{default:i(()=>[l(h,{sm:"3"},{default:i(()=>[Re]),_:1}),l(h,null,{default:i(()=>[l(X,{min:"0",max:"255",step:"5","thumb-label":"",color:"red","hide-details":"auto",modelValue:a.selectedSprite.r,"onUpdate:modelValue":n[4]||(n[4]=e=>a.selectedSprite.r=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(I,null,{default:i(()=>[l(h,{sm:"3"},{default:i(()=>[Xe]),_:1}),l(h,null,{default:i(()=>[l(X,{min:"0",max:"255",step:"5","thumb-label":"",color:"green","hide-details":"auto",modelValue:a.selectedSprite.g,"onUpdate:modelValue":n[5]||(n[5]=e=>a.selectedSprite.g=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(I,null,{default:i(()=>[l(h,{sm:"3"},{default:i(()=>[je]),_:1}),l(h,null,{default:i(()=>[l(X,{min:"0",max:"255",step:"5","thumb-label":"",color:"blue","hide-details":"auto",modelValue:a.selectedSprite.b,"onUpdate:modelValue":n[6]||(n[6]=e=>a.selectedSprite.b=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(I,null,{default:i(()=>[l(h,{xs:"1",sm:"3"},{default:i(()=>[He]),_:1}),l(h,null,{default:i(()=>[l(X,{"hide-details":"auto",max:"1",min:"0",step:"0.05",color:"blue","thumb-label":"",modelValue:a.selectedSprite.alpha,"onUpdate:modelValue":n[7]||(n[7]=e=>a.selectedSprite.alpha=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(I,null,{default:i(()=>[l(h,{sm:"3"},{default:i(()=>[Ge]),_:1}),l(h,null,{default:i(()=>[l(X,{min:"0",max:"1080",step:"5","thumb-label":"",color:"blue","hide-details":"auto",modelValue:a.selectedSprite.x,"onUpdate:modelValue":n[8]||(n[8]=e=>a.selectedSprite.x=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(I,null,{default:i(()=>[l(h,{sm:"3"},{default:i(()=>[Ke]),_:1}),l(h,null,{default:i(()=>[l(X,{min:"0",max:"1080",step:"5","thumb-label":"",color:"blue","hide-details":"auto",modelValue:a.selectedSprite.y,"onUpdate:modelValue":n[9]||(n[9]=e=>a.selectedSprite.y=e)},null,8,["modelValue"])]),_:1})]),_:1})],64))}},re={props:{chartId:{type:String,default:"bar-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]},data:{type:Array,default:()=>[_.map(_.range(256),a=>0),_.map(_.range(256),a=>0),_.map(_.range(256),a=>0),_.map(_.range(256),a=>0)]}},setup(a){const t=a;ge.register(we,ve,xe,oe,ye,ue,Se,_e,oe,ue);const s=Q(e=>({labels:_.range(256),datasets:[{data:t.data[0],backgroundColor:"#F44336",label:"red"},{data:t.data[1],backgroundColor:"#4CAF50",label:"green"},{data:t.data[2],backgroundColor:"#2196F3",label:"blue"},{data:t.data[3].map(r=>~~(r/4)),backgroundColor:"	#C0C0C0",label:"multiply"}]})),n=H({responsive:!0});return(e,r)=>(g(),C(T(be),{"chart-options":T(n),"chart-data":T(s),"chart-id":a.chartId,"dataset-id-key":a.datasetIdKey,plugins:a.plugins,"css-classes":a.cssClasses,styles:a.styles,width:a.width,height:a.height},null,8,["chart-options","chart-data","chart-id","dataset-id-key","plugins","css-classes","styles","width","height"]))}},We=x("canvas",{id:"Spline",width:"256",height:"256",style:{width:"100%"}},null,-1),Ye=x("canvas",{id:"cnv"},null,-1),Je=b("mdi-content-save"),Qe={props:["selectedSprite"],setup(a){const{selectedSprite:t}=a;function s(m,...y){let p=new Date().getTime(),S=m(...y),f=new Date().getTime(),P=f-p,V=m.name;return{t1:p,t2:f,dt:P,res:S,name:V}}async function n(m){let{width:y,height:p}=m;const S=document.createElement("canvas");S.width=y,S.height=p;const f=S.getContext("2d");return f.drawImage(m,0,0,y,p),await f.getImageData(0,0,y,p).data}const e=_.map(_.range(256),m=>0),r=z([e,e,e,e]),o=z(!1),u=z(0);let d;le(async m=>{const y=t.texture.baseTexture.cacheId,p=await engine.loadImg(y),S=await n(p),{width:f,height:P}=p;d=document.getElementById("cnv"),d.width=f,d.height=P,d.style.width="100%";const V=d.getContext("2d");let c=_.map(_.range(256),$=>0);const k=new GPU,{length:M}=S;let j=k.createKernel(function($,R){const U=$[this.thread.x];return this.thread.x%4==3?U:R[U]},{output:[M],graphical:!1});function v($,R){const U=new Float32Array($.length);for(let L=0;L<$.length;L+=1){const Y=$[L];L%4==3&&(U[L]=Y),U[L]=R[Y]}return U}function O(){for(let U=0;U<256;U+=1){let L=K.get(U);c[U]=Math.floor(L)}let $;o.value?$=j(S,new Float32Array(c)):$=v(S,c);const R=new ImageData(new Uint8ClampedArray($),f,P);V.putImageData(R,0,0),r.value=engine.pixelsToHistogram($)}let B;const W=document.getElementById("Spline"),K=new Newton([[0,0],[256,256]],W);K.onUpdate=()=>{B=s(O),u.value=B.dt},B=s(O),u.value=B.dt});function w(){let m=d.toDataURL();const y=PIXI.Texture.from(m);t.texture=y}return(m,y)=>(g(),A(F,null,[l(I,{justify:"center"},{default:i(()=>[We,Ye]),_:1}),l(re,{data:r.value},null,8,["data"]),b(" computed time "+Z(u.value)+" ",1),l(I,{justify:"space-around"},{default:i(()=>[l(Ve,{label:"GPU on",modelValue:o.value,"onUpdate:modelValue":y[0]||(y[0]=p=>o.value=p),color:"green","hide-details":""},null,8,["modelValue"]),l(G,{icon:"",color:"primary",onClick:y[1]||(y[1]=p=>w())},{default:i(()=>[l(ne,null,{default:i(()=>[Je]),_:1})]),_:1})]),_:1})],64))}},Ze=x("canvas",{id:"newSpline",width:"256",height:"256",style:{width:"100%"}},null,-1),et=x("canvas",{id:"cnv",style:{width:"100%"}},null,-1),tt=b("mdi-content-save"),lt={props:["selectedSprite"],setup(a){const{selectedSprite:t}=a;let s;z([0,0,0,0]);let n,e,r;le(async u=>{const d=t.texture.textureCacheIds[0];n=await engine.loadImg(d),s=document.getElementById("cnv"),s.width=640,s.height=640,s.style.width="100%";const w=s.getContext("webgl2",{premultipliedAlpha:!1}),m=new GPU({canvas:s,context:w});let y=640,p=640;e=m.createKernel(function(c,k){const M=c[this.thread.y][this.thread.x];this.color(k[Math.floor(M[0]*256)],k[Math.floor(M[1]*256)],k[Math.floor(M[2]*256)],M[3])},{output:[y,p],graphical:!0});let S=_.map(_.range(256),c=>0);function f(){new Date().getTime();for(let c=0;c<256;c+=1){let k=V.get(c);S[c]=k/256}new Date().getTime(),e(n,S),r=e.getPixels()}const P=document.getElementById("newSpline"),V=new Newton([[0,0],[256,256],[128,100]],P);V.onUpdate=f,f()});function o(){const{width:u,height:d}=n,w=document.createElement("canvas");w.width=u,w.height=d;const m=w.getContext("2d"),y=new ImageData(new Uint8ClampedArray(r),u,d);m.putImageData(y,0,0);let p=w.toDataURL();t.texture.baseTexture=new PIXI.BaseTexture(p)}return(u,d)=>(g(),A(F,null,[l(I,{justify:"center"},{default:i(()=>[Ze,et]),_:1}),l(G,{icon:"",color:"primary",onClick:d[0]||(d[0]=w=>o())},{default:i(()=>[l(ne,null,{default:i(()=>[tt]),_:1})]),_:1})],64))}};const nt=x("br",null,null,-1),at=x("br",null,null,-1),it=x("br",null,null,-1),st=x("br",null,null,-1),rt={props:["selectedSprite"],setup(a){const{selectedSprite:t}=a,s=`
      varying vec2 vTextureCoord;
      uniform sampler2D uSampler;
      uniform highp vec4 inputSize;
      uniform vec3 m1;
      uniform vec3 m2;
      uniform vec3 m3;
      uniform float size;
      mat3 mat = mat3(m1,m2,m3);
      void main(void)
      {
        vec2 cord = vTextureCoord;
        vec4 color;
        int i;
        int k;
        for(int i=0;i<3;i+=1){
          vec3 line = mat[i];
          for(int k=0;k<3;k+=1){
            vec2 ncord = vec2(cord.x+inputSize.z*float(i-1)*size,cord.y+inputSize.w*float(k-1)*size);
            color += texture2D(uSampler, ncord) *mat[i][k]  ;
          }
        }
        color.a =1.;
        gl_FragColor = color  ;
      }
      `,n=new PIXI.Filter(null,s,{m1:[0,0,0],m2:[0,1,0],m3:[0,0,0],size:1,test:new Float32Array([1,2,3,4,5])});t.filters=[n];const e=z(t.filters[0].uniforms);return(r,o)=>(g(),A("div",null,[E(x("input",{type:"range",min:"0.5",max:"3",step:"0.1","onUpdate:modelValue":o[0]||(o[0]=u=>e.value.size=u)},null,512),[[N,e.value.size]]),nt,E(x("input",{type:"number","onUpdate:modelValue":o[1]||(o[1]=u=>e.value.m1[0]=u)},null,512),[[N,e.value.m1[0]]]),E(x("input",{type:"number","onUpdate:modelValue":o[2]||(o[2]=u=>e.value.m1[1]=u)},null,512),[[N,e.value.m1[1]]]),E(x("input",{type:"number","onUpdate:modelValue":o[3]||(o[3]=u=>e.value.m1[2]=u)},null,512),[[N,e.value.m1[2]]]),at,E(x("input",{type:"number","onUpdate:modelValue":o[4]||(o[4]=u=>e.value.m2[0]=u)},null,512),[[N,e.value.m2[0]]]),E(x("input",{type:"number","onUpdate:modelValue":o[5]||(o[5]=u=>e.value.m2[1]=u)},null,512),[[N,e.value.m2[1]]]),E(x("input",{type:"number","onUpdate:modelValue":o[6]||(o[6]=u=>e.value.m2[2]=u)},null,512),[[N,e.value.m2[2]]]),it,E(x("input",{type:"number","onUpdate:modelValue":o[7]||(o[7]=u=>e.value.m3[0]=u)},null,512),[[N,e.value.m3[0]]]),E(x("input",{type:"number","onUpdate:modelValue":o[8]||(o[8]=u=>e.value.m3[1]=u)},null,512),[[N,e.value.m3[1]]]),E(x("input",{type:"number","onUpdate:modelValue":o[9]||(o[9]=u=>e.value.m3[2]=u)},null,512),[[N,e.value.m3[2]]]),st]))}},ot=x("canvas",{id:"cnv"},null,-1),ut={props:["selectedSprite"],setup(a){const{selectedSprite:t}=a,s=t.texture.textureCacheIds[0];let n,e,r;function o(){let p=0;for(let c=0;c<e.length;c+=1)p+=e[c];const S=Number(p)/e.length*3;let f=new Float32Array(e.length),P=0,V=0;for(let c=0;c<e.length;c+=1){const k=e[c];c%4==3&&(f[c]=k),c%4==0&&(P=e[c]+e[c+1]+e[c+2],P<=S?V=0:V=255,f[c]=V,f[c+1]=V,f[c+2]=V)}return f}function u(){let{width:p,height:S}=n,f=new Array(256).fill(0);for(let v=0;v<e.length;v+=1)v%4<3&&(f[e[v]]+=1);f=f.map(v=>v/(3*p*S));const P=f.reduce((v,O,B)=>v+O*B,0);let V=0,c=0;for(let v=0;v<f.length;v++){const O=f.slice(0,v),B=O.reduce((U,L)=>U+L,0),W=1-B,K=O.reduce((U,L,Y)=>U+L*Y,0)/B,$=(P-K*B)/W,R=B*W*(K-$)**2;R>V&&(V=R,c=v)}let k=new Float32Array(e.length),M=0,j=0;for(let v=0;v<e.length;v+=1){const O=e[v];v%4==3&&(k[v]=O),v%4==0&&(M=(e[v]+e[v+1]+e[v+2])/3,M<=c?j=0:j=255,k[v]=j,k[v+1]=j,k[v+2]=j)}return k}function d(p){if(p==0)return o();if(p==1)return u()}function w(p){const{width:S,height:f}=n,P=r.getContext("2d");let V;V=d(p);const c=new ImageData(new Uint8ClampedArray(V),S,f);P.putImageData(c,0,0)}le(async p=>{n=await engine.loadImg(s),e=await engine.loadPixels(n);const{width:S,height:f}=n;r=document.getElementById("cnv"),r.width=S,r.height=f,r.style.width="100%",w(0)});const m=z(0),y=H([{title:"Gavrilov",value:0},{title:"Otsu",value:1}]);return(p,S)=>(g(),A(F,null,[l(ee,{"onUpdate:modelValue":[w,S[0]||(S[0]=f=>m.value=f)],label:"methods",items:T(y),modelValue:m.value},null,8,["items","modelValue"]),l(I,{justify:"center"},{default:i(()=>[ot]),_:1})],64))}},dt=["src"],ct={props:["selectedSprite"],setup(a){const t=z(0),s=H([{title:"params",value:0},{title:"gradient transformations",value:1},{title:"gradient transformations faster",value:2},{title:"mask filtration",value:3},{title:"Binarization",value:4}]);return(n,e)=>a.selectedSprite?(g(),C(ie,{key:0},{default:i(()=>[l(ae,null,{default:i(()=>[l(I,{justify:"center"},{default:i(()=>[l(h,{sm:"8"},{default:i(()=>[a.selectedSprite.texture?(g(),A("img",{key:0,style:{width:"100%"},src:a.selectedSprite.texture.textureCacheIds[0]},null,8,dt)):q("",!0)]),_:1})]),_:1}),l(ee,{label:"window",items:T(s),modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value=r),"hide-details":""},null,8,["items","modelValue"]),l(me,{style:{margin:"10px 0px"}}),t.value==0?(g(),C(qe,{key:0,selectedSprite:a.selectedSprite},null,8,["selectedSprite"])):t.value==1?(g(),C(Qe,{key:1,selectedSprite:a.selectedSprite},null,8,["selectedSprite"])):t.value==2?(g(),C(lt,{key:2,selectedSprite:a.selectedSprite},null,8,["selectedSprite"])):t.value==3?(g(),C(rt,{key:3,selectedSprite:a.selectedSprite},null,8,["selectedSprite"])):t.value==4?(g(),C(ut,{key:4,selectedSprite:a.selectedSprite},null,8,["selectedSprite"])):q("",!0)]),_:1})]),_:1})):q("",!0)}},mt=x("h2",null,"List of layers",-1),pt=["src"],ft=b(" mdi-delete "),ht=b(" add picture "),gt={props:["sprites","selectedSprite"],emits:["selectSprite"],setup(a,{emit:t}){const s=a,{sprites:n,selectedSprite:e}=s;function r(u){const[d]=n.splice(u,1),{room:w}=engine;w.children=w.children.filter(m=>m.id!=d.id)}function o(u){const d=document.createElement("input");d.type="file",d.multiple=!0,d.accept=".png,.jpg,.jpeg",d.onchange=function(w){console.log(w);const m=w.target.files;for(let y of m){const p=URL.createObjectURL(y);engine.addSprite(p)}},d.click()}return(u,d)=>(g(),A(F,null,[mt,(g(!0),A(F,null,pe(T(n),(w,m)=>(g(),C(ie,{key:m,onClick:y=>u.$emit("selectSprite",w)},{default:i(()=>[l(ae,null,{default:i(()=>[l(I,{align:"center"},{default:i(()=>[w.texture?(g(),A(F,{key:0},[l(h,{cols:"2",sm:"3"},{default:i(()=>[x("img",{src:w.texture.textureCacheIds[0],style:{width:"100%"}},null,8,pt)]),_:2},1024),l(h,{cols:"8",sm:"6"},{default:i(()=>[b(Z(w.Name),1)]),_:2},1024),l(h,{cols:"2",sm:"3"},{default:i(()=>[x("div",null,[l(G,{icon:"",onClick:y=>r(m),color:"red"},{default:i(()=>[l(ne,null,{default:i(()=>[ft]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024)],64)):(g(),C(h,{key:1},{default:i(()=>[b(Z(w.Name),1)]),_:2},1024))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),l(G,{color:"green",onClick:o},{default:i(()=>[ht]),_:1})],64))}},wt=b(" alpha "),vt=b(" width "),xt=b(" height "),yt={props:["selectedSprite"],setup(a){const{room:t}=engine,s=Q({get:()=>t.alpha,set:r=>t.alpha=r}),n=Q({get:()=>t.width,set:r=>t.width=r}),e=Q({get:()=>t.height,set:r=>t.height=r});return(r,o)=>(g(),A(F,null,[l(ce,{label:"name",modelValue:a.selectedSprite.Name,"onUpdate:modelValue":o[0]||(o[0]=u=>a.selectedSprite.Name=u),"hide-details":""},null,8,["modelValue"]),l(I,null,{default:i(()=>[l(h,{xs:"1",sm:"3"},{default:i(()=>[wt]),_:1}),l(h,null,{default:i(()=>[E(x("input",{type:"range",max:"1",min:"0",step:"0.05",color:"blue","onUpdate:modelValue":o[1]||(o[1]=u=>te(s)?s.value=u:null)},null,512),[[N,T(s)]])]),_:1})]),_:1}),l(I,null,{default:i(()=>[l(h,{sm:"3"},{default:i(()=>[vt]),_:1}),l(h,null,{default:i(()=>[E(x("input",{type:"range",min:"0",max:"1080",step:"5",color:"blue","onUpdate:modelValue":o[2]||(o[2]=u=>te(n)?n.value=u:null)},null,512),[[N,T(n)]])]),_:1})]),_:1}),l(I,null,{default:i(()=>[l(h,{sm:"3"},{default:i(()=>[xt]),_:1}),l(h,null,{default:i(()=>[E(x("input",{type:"range",min:"0",max:"1080",step:"5",color:"blue","thumb-label":"","onUpdate:modelValue":o[3]||(o[3]=u=>te(e)?e.value=u:null)},null,512),[[N,T(e)]])]),_:1})]),_:1})],64))}},St=b("update histogram"),_t={props:["selectedSprite"],setup(a){const t=_.map(_.range(256),e=>0),s=z([t,t,t,t]);function n(){s.value=H(engine.histogram())}return(e,r)=>(g(),A(F,null,[l(re,{data:s.value},null,8,["data"]),l(G,{color:"green",onClick:n},{default:i(()=>[St]),_:1})],64))}},bt={props:["selectedSprite"],setup(a){const t=z(0),s=H([{title:"params",value:0},{title:"gradient transformations",value:1}]);return(n,e)=>a.selectedSprite?(g(),C(ie,{key:0},{default:i(()=>[l(ae,null,{default:i(()=>[l(ee,{label:"window",items:T(s),modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value=r),"hide-details":""},null,8,["items","modelValue"]),l(me,{style:{margin:"10px 0px"}}),t.value==0?(g(),C(yt,{key:0,selectedSprite:a.selectedSprite},null,8,["selectedSprite"])):t.value==1?(g(),C(_t,{key:1,selectedSprite:a.selectedSprite},null,8,["selectedSprite"])):q("",!0)]),_:1})]),_:1})):q("",!0)}},Vt=b(" options "),It={emits:"switchDrawer",setup(a,{emit:t}){function s(){engine.downImg()}const n=H([{title:"download",func:s}]);function e(o){o.func&&o.func()}function r(){t("switchDrawer")}return(o,u)=>(g(),C(Pe,{"extension-height":"40"},{prepend:i(()=>[l(Ie,{onClick:r})]),append:i(()=>[]),default:i(()=>[l(De,null,{default:i(()=>[l(Ce,null,{activator:i(({props:d})=>[l(G,ke({color:"primary"},d),{default:i(()=>[Vt]),_:2},1040)]),default:i(()=>[l(Ue,null,{default:i(()=>[(g(!0),A(F,null,pe(T(n),(d,w)=>(g(),C($e,{key:w,value:d},{default:i(()=>[l(Ee,{onClick:m=>e(d)},{default:i(()=>[b(Z(d.title),1)]),_:2},1032,["onClick"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}};var Ct=(a,t)=>{const s=a.__vccOpts||a;for(const[n,e]of t)s[n]=e;return s};const kt={components:{spriteList:gt,spriteEdit:ct,LayerEdit:bt,bar:It,Histogram:re},data(){return{imgs:[],selectedSprite:void 0,drawer:!1}},methods:{selectSprite(a){this.selectedSprite=a,this.drawer=!1},switchDrawer(){this.drawer=!!(1-this.drawer)}},mounted(){engine=new Me(document.getElementById("window"),this.imgs),this.engine=engine,vm=this}},Ut=x("div",{id:"window"},null,-1);function Dt(a,t,s,n,e,r){const o=J("bar"),u=J("sprite-list"),d=J("layer-edit"),w=J("sprite-edit");return g(),C(Ne,null,{default:i(()=>[l(o,{onSwitchDrawer:r.switchDrawer},null,8,["onSwitchDrawer"]),l(Le,{modelValue:e.drawer,"onUpdate:modelValue":t[0]||(t[0]=m=>e.drawer=m),absolute:"",bottom:"",temporary:""},{default:i(()=>[l(u,{sprites:e.imgs,onSelectSprite:r.selectSprite,selectedSprite:e.selectedSprite},null,8,["sprites","onSelectSprite","selectedSprite"])]),_:1},8,["modelValue"]),l(Ae,null,{default:i(()=>[l(I,null,{default:i(()=>[l(h,{sm:"8"},{default:i(()=>[Ut]),_:1}),l(h,{sm:"4",style:{height:"89vh","overflow-y":"auto"}},{default:i(()=>{var m;return[((m=e.selectedSprite)==null?void 0:m.type)=="layer"?(g(),C(d,{key:0,selectedSprite:e.selectedSprite},null,8,["selectedSprite"])):(g(),C(w,{key:1,selectedSprite:e.selectedSprite},null,8,["selectedSprite"])),l(u,{sprites:e.imgs,onSelectSprite:r.selectSprite,selectedSprite:e.selectedSprite},null,8,["sprites","onSelectSprite","selectedSprite"])]}),_:1})]),_:1})]),_:1})]),_:1})}var Pt=Ct(kt,[["render",Dt]]);var $t=Te();const Et="modulepreload",de={},Nt="./",Lt=function(t,s){return!s||s.length===0?t():Promise.all(s.map(n=>{if(n=`${Nt}${n}`,n in de)return;de[n]=!0;const e=n.endsWith(".css"),r=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const o=document.createElement("link");if(o.rel=e?"stylesheet":Et,e||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),e)return new Promise((u,d)=>{o.addEventListener("load",u),o.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};async function At(){(await Lt(()=>import("./webfontloader.cd097671.js").then(function(t){return t.w}),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}At();Be(Pt).use($t,{},!1,"bootstrap3").mount("#app");
