var fe=Object.defineProperty;var he=(i,t,a)=>t in i?fe(i,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[t]=a;var D=(i,t,a)=>(he(i,typeof t!="symbol"?t+"":t,a),a);import{r as H,o as h,c as N,a as l,V as ce,u as L,b as Z,w as s,d as f,e as R,f as V,F as T,g as S,C as ge,p as ve,h as we,i as xe,L as oe,j as ye,P as ue,k as Se,B as _e,l as J,m as k,n as be,q as O,s as te,t as Q,v as Ve,x as G,y as le,z as x,A as $,D as E,E as K,G as me,H as ne,I as ie,J as pe,K as ee,M as Ie,N as Ce,O as ke,Q as Ue,R as De,S as Pe,T as $e,U as Ee,W as Y,X as Ne,Y as Le,Z as Ae,_ as Te,$ as Be}from"./vendor.29c62639.js";const Fe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=a(e);fetch(e.href,r)}};Fe();class Ft extends PIXI.Container{constructor(){super(...arguments);D(this,"Name","layer");D(this,"type","layer")}get r(){return(this.tint&16711680)/65536,(this.tint&16711680)/65536}set r(t){let a=t%256*65536+(65535&this.tint);this.tint=a}get g(){return(this.tint&65280)/256}set g(t){this.tint=t%256*256+(16711935&this.tint)}get b(){return this.tint&255}set b(t){this.tint=t%256+(16776960&this.tint)}}class ae extends PIXI.Sprite{constructor(){super(...arguments);D(this,"Name","picture");D(this,"type","sprite")}get r(){return(this.tint&16711680)/65536,(this.tint&16711680)/65536}set r(t){let a=t%256*65536+(65535&this.tint);this.tint=a}get g(){return(this.tint&65280)/256}set g(t){this.tint=t%256*256+(16711935&this.tint)}get b(){return this.tint&255}set b(t){this.tint=t%256+(16776960&this.tint)}pixels(){const t=this.texture.textureCacheIds[0],a=new ae;a.src=t,a.onload=function(){}}}class Me{constructor(t,a){D(this,"sprites",[]);D(this,"textures",[]);D(this,"width",1080);D(this,"height",768);D(this,"ctx");D(this,"view");D(this,"app");D(this,"room");D(this,"extract");D(this,"_sprites",0);this.sprites=a;const n=new PIXI.Application({width:this.width,height:this.height,transparent:!0,resolution:window.devicePixelRatio||1});this.extract=n.renderer.extract,this.app=n,this.view=n.view;const{stage:e}=n;this.stage=e;const r=e;r.Name="Main layer",r.id=0,this.room=r,a.push({Name:"Main layer",type:"layer",id:0}),this.ctx=this.view.getContext("webgl2"),t.appendChild(n.view)}async loadPixels(t){let{width:a,height:n}=t;const e=document.createElement("canvas");e.width=a,e.height=n;const r=e.getContext("2d");return r.drawImage(t,0,0,a,n),await r.getImageData(0,0,a,n).data}loadImg(t){return new Promise((a,n)=>{let e=new Image;e.src=t,e.onload=r=>{a(e)}})}pixels(){return this.extract.pixels(this.app.stage)}pixelsToHistogram(t){const a=_.map(_.range(256),r=>0);let n=[a.slice(),a.slice(),a.slice(),a.slice()],e;for(let r=0;r<t.length;r+=1)r%4!=3&&~~(r/4)*4+3!=0&&(e=t[r],n[r%4][e]+=1,n[3][e]+=1);return n}histogram(){const t=this.pixels();return this.pixelsToHistogram(t)}saveFile(t,a="outImg"){let n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",a),n.click()}downImg(){const t=this.extract.image(this.app.stage);this.saveFile(t.src)}addSprite(t){const{textures:a,sprites:n,room:e}=this,r=PIXI.Texture.from(t);a.push(r),this._sprites+=1;const o=new ae(r);o.id=this._sprites,n.push(o),e.addChild(o)}}const Oe=S(" width "),ze=S(" height "),Re=S(" red "),Xe=S(" green "),je=S(" blue "),He=S(" alpha "),Ge=S(" x "),Ke=S(" y "),qe={props:["selectedSprite"],setup(i){const t=H([{title:"normal",value:PIXI.BLEND_MODES.NORMAL},{title:"add",value:PIXI.BLEND_MODES.ADD},{title:"multiply",value:PIXI.BLEND_MODES.MULTIPLY},{title:"average",value:PIXI.BLEND_MODES.SCREEN}]);return(a,n)=>(h(),N(T,null,[l(ce,{label:"name",modelValue:i.selectedSprite.Name,"onUpdate:modelValue":n[0]||(n[0]=e=>i.selectedSprite.Name=e),"hide-details":""},null,8,["modelValue"]),l(Z,{label:"blend mode",items:L(t),modelValue:i.selectedSprite.blendMode,"onUpdate:modelValue":n[1]||(n[1]=e=>i.selectedSprite.blendMode=e),"hide-details":""},null,8,["items","modelValue"]),l(V,null,{default:s(()=>[l(f,{sm:"3"},{default:s(()=>[Oe]),_:1}),l(f,null,{default:s(()=>[l(R,{min:"0",max:"1080",step:"5","thumb-label":"","hide-details":"auto",color:"blue",modelValue:i.selectedSprite.width,"onUpdate:modelValue":n[2]||(n[2]=e=>i.selectedSprite.width=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(V,null,{default:s(()=>[l(f,{sm:"3"},{default:s(()=>[ze]),_:1}),l(f,null,{default:s(()=>[l(R,{min:"0",max:"1080",step:"5","thumb-label":"",color:"blue","hide-details":"auto",modelValue:i.selectedSprite.height,"onUpdate:modelValue":n[3]||(n[3]=e=>i.selectedSprite.height=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(V,null,{default:s(()=>[l(f,{sm:"3"},{default:s(()=>[Re]),_:1}),l(f,null,{default:s(()=>[l(R,{min:"0",max:"255",step:"5","thumb-label":"",color:"red","hide-details":"auto",modelValue:i.selectedSprite.r,"onUpdate:modelValue":n[4]||(n[4]=e=>i.selectedSprite.r=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(V,null,{default:s(()=>[l(f,{sm:"3"},{default:s(()=>[Xe]),_:1}),l(f,null,{default:s(()=>[l(R,{min:"0",max:"255",step:"5","thumb-label":"",color:"green","hide-details":"auto",modelValue:i.selectedSprite.g,"onUpdate:modelValue":n[5]||(n[5]=e=>i.selectedSprite.g=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(V,null,{default:s(()=>[l(f,{sm:"3"},{default:s(()=>[je]),_:1}),l(f,null,{default:s(()=>[l(R,{min:"0",max:"255",step:"5","thumb-label":"",color:"blue","hide-details":"auto",modelValue:i.selectedSprite.b,"onUpdate:modelValue":n[6]||(n[6]=e=>i.selectedSprite.b=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(V,null,{default:s(()=>[l(f,{xs:"1",sm:"3"},{default:s(()=>[He]),_:1}),l(f,null,{default:s(()=>[l(R,{"hide-details":"auto",max:"1",min:"0",step:"0.05",color:"blue","thumb-label":"",modelValue:i.selectedSprite.alpha,"onUpdate:modelValue":n[7]||(n[7]=e=>i.selectedSprite.alpha=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(V,null,{default:s(()=>[l(f,{sm:"3"},{default:s(()=>[Ge]),_:1}),l(f,null,{default:s(()=>[l(R,{min:"0",max:"1080",step:"5","thumb-label":"",color:"blue","hide-details":"auto",modelValue:i.selectedSprite.x,"onUpdate:modelValue":n[8]||(n[8]=e=>i.selectedSprite.x=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(V,null,{default:s(()=>[l(f,{sm:"3"},{default:s(()=>[Ke]),_:1}),l(f,null,{default:s(()=>[l(R,{min:"0",max:"1080",step:"5","thumb-label":"",color:"blue","hide-details":"auto",modelValue:i.selectedSprite.y,"onUpdate:modelValue":n[9]||(n[9]=e=>i.selectedSprite.y=e)},null,8,["modelValue"])]),_:1})]),_:1})],64))}},se={props:{chartId:{type:String,default:"bar-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]},data:{type:Array,default:()=>[_.map(_.range(256),i=>0),_.map(_.range(256),i=>0),_.map(_.range(256),i=>0),_.map(_.range(256),i=>0)]}},setup(i){const t=i;ge.register(ve,we,xe,oe,ye,ue,Se,_e,oe,ue);const a=J(e=>({labels:_.range(256),datasets:[{data:t.data[0],backgroundColor:"#F44336",label:"red"},{data:t.data[1],backgroundColor:"#4CAF50",label:"green"},{data:t.data[2],backgroundColor:"#2196F3",label:"blue"},{data:t.data[3].map(r=>~~(r/4)),backgroundColor:"	#C0C0C0",label:"multiply"}]})),n=H({responsive:!0});return(e,r)=>(h(),k(L(be),{"chart-options":L(n),"chart-data":L(a),"chart-id":i.chartId,"dataset-id-key":i.datasetIdKey,plugins:i.plugins,"css-classes":i.cssClasses,styles:i.styles,width:i.width,height:i.height},null,8,["chart-options","chart-data","chart-id","dataset-id-key","plugins","css-classes","styles","width","height"]))}},We=x("canvas",{id:"Spline",width:"256",height:"256",style:{width:"100%"}},null,-1),Ye=x("canvas",{id:"cnv"},null,-1),Je=S("mdi-content-save"),Qe={props:["selectedSprite"],setup(i){const{selectedSprite:t}=i;function a(v,...c){let w=new Date().getTime(),p=v(...c),I=new Date().getTime(),b=I-w,d=v.name;return{t1:w,t2:I,dt:b,res:p,name:d}}async function n(v){let{width:c,height:w}=v;const p=document.createElement("canvas");p.width=c,p.height=w;const I=p.getContext("2d");return I.drawImage(v,0,0,c,w),await I.getImageData(0,0,c,w).data}const e=_.map(_.range(256),v=>0),r=O([e,e,e,e]),o=O(!1),u=O(0);let m;te(async v=>{const c=t.texture.baseTexture.cacheId,w=await engine.loadImg(c),p=await n(w),{width:I,height:b}=w;m=document.getElementById("cnv"),m.width=I,m.height=b,m.style.width="100%";const d=m.getContext("2d");let C=_.map(_.range(256),P=>0);const B=new GPU,{length:X}=p;let g=B.createKernel(function(P,M){const U=P[this.thread.x];return this.thread.x%4==3?U:M[U]},{output:[X],graphical:!1});function z(P,M){const U=new Float32Array(P.length);for(let A=0;A<P.length;A+=1){const re=P[A];A%4==3&&(U[A]=re),U[A]=M[re]}return U}function F(){for(let U=0;U<256;U+=1){let A=W.get(U);C[U]=Math.floor(A)}let P;o.value?P=g(p,new Float32Array(C)):P=z(p,C);const M=new ImageData(new Uint8ClampedArray(P),I,b);d.putImageData(M,0,0),r.value=engine.pixelsToHistogram(P)}let j;const q=document.getElementById("Spline"),W=new Newton([[0,0],[255,255]],q);W.onUpdate=()=>{j=a(F),u.value=j.dt},j=a(F),u.value=j.dt});function y(){let v=m.toDataURL();const c=PIXI.Texture.from(v);t.texture=c}return(v,c)=>(h(),N(T,null,[l(V,{justify:"center"},{default:s(()=>[We,Ye]),_:1}),l(se,{data:r.value},null,8,["data"]),S(" computed time "+Q(u.value)+" ",1),l(V,{justify:"space-around"},{default:s(()=>[l(Ve,{label:"GPU on",modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=w=>o.value=w),color:"green","hide-details":""},null,8,["modelValue"]),l(G,{icon:"",color:"primary",onClick:c[1]||(c[1]=w=>y())},{default:s(()=>[l(le,null,{default:s(()=>[Je]),_:1})]),_:1})]),_:1})],64))}},Ze=x("canvas",{id:"newSpline",width:"256",height:"256",style:{width:"100%"}},null,-1),et=x("canvas",{id:"cnv",style:{width:"100%"}},null,-1),tt=S("mdi-content-save"),lt={props:["selectedSprite"],setup(i){const{selectedSprite:t}=i;let a;O([0,0,0,0]),te(async e=>{const r=t.texture.textureCacheIds[0],o=await engine.loadImg(r);a=document.getElementById("cnv"),a.width=640,a.height=640,a.style.width="100%";const u=a.getContext("webgl2",{premultipliedAlpha:!1}),m=new GPU({canvas:a,context:u});let y=640,v=640,c=m.createKernel(function(d,C){const B=d[this.thread.y][this.thread.x];this.color(C[Math.floor(B[0]*256)],C[Math.floor(B[1]*256)],C[Math.floor(B[2]*256)],B[3])},{output:[y,v],graphical:!0}),w=_.map(_.range(256),d=>0);function p(){new Date().getTime();for(let d=0;d<256;d+=1){let C=b.get(d);w[d]=C/256}new Date().getTime(),c(o,w)}const I=document.getElementById("newSpline"),b=new Newton([[0,0],[255,255],[128,100]],I);b.onUpdate=p,p()});function n(){a.toDataURL(),new Image,t.texture.baseTexture=new PIXI.BaseTexture(a)}return(e,r)=>(h(),N(T,null,[l(V,{justify:"center"},{default:s(()=>[Ze,et]),_:1}),l(G,{icon:"",color:"primary",onClick:r[0]||(r[0]=o=>n())},{default:s(()=>[l(le,null,{default:s(()=>[tt]),_:1})]),_:1})],64))}};const nt=x("br",null,null,-1),it=x("br",null,null,-1),at=x("br",null,null,-1),st=x("br",null,null,-1),rt={props:["selectedSprite"],setup(i){const{selectedSprite:t}=i,a=`
      varying vec2 vTextureCoord;
      uniform sampler2D uSampler;
      uniform highp vec4 inputSize;
      uniform vec3 m1;
      uniform vec3 m2;
      uniform vec3 m3;
      uniform float size;
      mat3 mat = mat3(m1,m2,m3);
      void main(void)
      {
        vec2 cord = vTextureCoord;
        vec4 color;
        int i;
        int k;
        for(int i=0;i<3;i+=1){
          vec3 line = mat[i];
          for(int k=0;k<3;k+=1){
            vec2 ncord = vec2(cord.x+inputSize.z*float(i-1)*size,cord.y+inputSize.w*float(k-1)*size);
            color += texture2D(uSampler, ncord) *mat[i][k]  ;
          }
        }
        color.a =1.;
        gl_FragColor = color  ;
      }
      `,n=new PIXI.Filter(null,a,{m1:[0,0,0],m2:[0,1,0],m3:[0,0,0],size:1,test:new Float32Array([1,2,3,4,5])});t.filters=[n];const e=O(t.filters[0].uniforms);return(r,o)=>(h(),N("div",null,[$(x("input",{type:"range",min:"0.5",max:"3",step:"0.1","onUpdate:modelValue":o[0]||(o[0]=u=>e.value.size=u)},null,512),[[E,e.value.size]]),nt,$(x("input",{type:"number","onUpdate:modelValue":o[1]||(o[1]=u=>e.value.m1[0]=u)},null,512),[[E,e.value.m1[0]]]),$(x("input",{type:"number","onUpdate:modelValue":o[2]||(o[2]=u=>e.value.m1[1]=u)},null,512),[[E,e.value.m1[1]]]),$(x("input",{type:"number","onUpdate:modelValue":o[3]||(o[3]=u=>e.value.m1[2]=u)},null,512),[[E,e.value.m1[2]]]),it,$(x("input",{type:"number","onUpdate:modelValue":o[4]||(o[4]=u=>e.value.m2[0]=u)},null,512),[[E,e.value.m2[0]]]),$(x("input",{type:"number","onUpdate:modelValue":o[5]||(o[5]=u=>e.value.m2[1]=u)},null,512),[[E,e.value.m2[1]]]),$(x("input",{type:"number","onUpdate:modelValue":o[6]||(o[6]=u=>e.value.m2[2]=u)},null,512),[[E,e.value.m2[2]]]),at,$(x("input",{type:"number","onUpdate:modelValue":o[7]||(o[7]=u=>e.value.m3[0]=u)},null,512),[[E,e.value.m3[0]]]),$(x("input",{type:"number","onUpdate:modelValue":o[8]||(o[8]=u=>e.value.m3[1]=u)},null,512),[[E,e.value.m3[1]]]),$(x("input",{type:"number","onUpdate:modelValue":o[9]||(o[9]=u=>e.value.m3[2]=u)},null,512),[[E,e.value.m3[2]]]),st]))}},ot=x("canvas",{id:"cnv"},null,-1),ut={props:["selectedSprite"],setup(i){const{selectedSprite:t}=i,a=t.texture.textureCacheIds[0];let n,e,r;function o(){let c=0;for(let d=0;d<e.length;d+=1)c+=e[d];const w=Number(c)/e.length*3;let p=new Float32Array(e.length),I=0,b=0;for(let d=0;d<e.length;d+=1){const C=e[d];d%4==3&&(p[d]=C),d%4==0&&(I=e[d]+e[d+1]+e[d+2],I<=w?b=0:b=255,p[d]=b,p[d+1]=b,p[d+2]=b)}return p}function u(){let{width:c,height:w}=n,p=new Array(256).fill(0);for(let g=0;g<e.length;g+=1)g%4<3&&(p[e[g]]+=1);p=p.map(g=>g/(3*c*w));const I=p.reduce((g,z,F)=>g+z*F,0);let b=0,d=0;for(let g=0;g<p.length;g++){const z=p.slice(0,g),F=z.reduce((M,U)=>M+U,0),j=1-F,q=z.reduce((M,U,A)=>M+U*A,0)/F,W=(I-q*F)/j,P=F*j*(q-W)**2;P>b&&(b=P,d=g)}let C=new Float32Array(e.length),B=0,X=0;for(let g=0;g<e.length;g+=1){const z=e[g];g%4==3&&(C[g]=z),g%4==0&&(B=(e[g]+e[g+1]+e[g+2])/3,B<=d?X=0:X=255,C[g]=X,C[g+1]=X,C[g+2]=X)}return C}function m(c){if(c==0)return o();if(c==1)return u()}function y(c){const{width:w,height:p}=n,I=r.getContext("2d");let b;b=m(c);const d=new ImageData(new Uint8ClampedArray(b),w,p);I.putImageData(d,0,0)}te(async c=>{n=await engine.loadImg(a),e=await engine.loadPixels(n);const{width:w,height:p}=n;r=document.getElementById("cnv"),r.width=w,r.height=p,r.style.width="100%",y(0)}),O(0);const v=H([{title:"Gavrilov",value:0},{title:"Otsu",value:1}]);return(c,w)=>(h(),N(T,null,[l(Z,{"onUpdate:modelValue":y,label:"methods",items:L(v),value:"method"},null,8,["items"]),l(V,{justify:"center"},{default:s(()=>[ot]),_:1})],64))}},dt=["src"],ct={props:["selectedSprite"],setup(i){const t=O(0),a=H([{title:"params",value:0},{title:"gradient transformations",value:1},{title:"gradient transformations faster",value:2},{title:"mask filtration",value:3},{title:"Binarization",value:4}]);return(n,e)=>i.selectedSprite?(h(),k(ie,{key:0},{default:s(()=>[l(ne,null,{default:s(()=>[l(V,{justify:"center"},{default:s(()=>[l(f,{sm:"8"},{default:s(()=>[i.selectedSprite.texture?(h(),N("img",{key:0,style:{width:"100%"},src:i.selectedSprite.texture.textureCacheIds[0]},null,8,dt)):K("",!0)]),_:1})]),_:1}),l(Z,{label:"window",items:L(a),modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value=r),"hide-details":""},null,8,["items","modelValue"]),l(me,{style:{margin:"10px 0px"}}),t.value==0?(h(),k(qe,{key:0,selectedSprite:i.selectedSprite},null,8,["selectedSprite"])):t.value==1?(h(),k(Qe,{key:1,selectedSprite:i.selectedSprite},null,8,["selectedSprite"])):t.value==2?(h(),k(lt,{key:2,selectedSprite:i.selectedSprite},null,8,["selectedSprite"])):t.value==3?(h(),k(rt,{key:3,selectedSprite:i.selectedSprite},null,8,["selectedSprite"])):t.value==4?(h(),k(ut,{key:4,selectedSprite:i.selectedSprite},null,8,["selectedSprite"])):K("",!0)]),_:1})]),_:1})):K("",!0)}},mt=x("h2",null,"List of layers",-1),pt=["src"],ft=S(" mdi-delete "),ht=S(" add picture "),gt={props:["sprites","selectedSprite"],emits:["selectSprite"],setup(i,{emit:t}){const a=i,{sprites:n,selectedSprite:e}=a;function r(u){const[m]=n.splice(u,1),{room:y}=engine;y.children=y.children.filter(v=>v.id!=m.id)}function o(u){const m=document.createElement("input");m.type="file",m.multiple=!0,m.accept=".png,.jpg,.jpeg",m.onchange=function(y){console.log(y);const v=y.target.files;for(let c of v){const w=URL.createObjectURL(c);engine.addSprite(w)}},m.click()}return(u,m)=>(h(),N(T,null,[mt,(h(!0),N(T,null,pe(L(n),(y,v)=>(h(),k(ie,{key:v,onClick:c=>u.$emit("selectSprite",y)},{default:s(()=>[l(ne,null,{default:s(()=>[l(V,{align:"center"},{default:s(()=>[y.texture?(h(),N(T,{key:0},[l(f,{cols:"2",sm:"3"},{default:s(()=>[x("img",{src:y.texture.textureCacheIds[0],style:{width:"100%"}},null,8,pt)]),_:2},1024),l(f,{cols:"8",sm:"6"},{default:s(()=>[S(Q(y.Name),1)]),_:2},1024),l(f,{cols:"2",sm:"3"},{default:s(()=>[x("div",null,[l(G,{icon:"",onClick:c=>r(v),color:"red"},{default:s(()=>[l(le,null,{default:s(()=>[ft]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024)],64)):(h(),k(f,{key:1},{default:s(()=>[S(Q(y.Name),1)]),_:2},1024))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),l(G,{color:"green",onClick:o},{default:s(()=>[ht]),_:1})],64))}},vt=S(" alpha "),wt=S(" width "),xt=S(" height "),yt={props:["selectedSprite"],setup(i){const{room:t}=engine,a=J({get:()=>t.alpha,set:r=>t.alpha=r}),n=J({get:()=>t.width,set:r=>t.width=r}),e=J({get:()=>t.height,set:r=>t.height=r});return(r,o)=>(h(),N(T,null,[l(ce,{label:"name",modelValue:i.selectedSprite.Name,"onUpdate:modelValue":o[0]||(o[0]=u=>i.selectedSprite.Name=u),"hide-details":""},null,8,["modelValue"]),l(V,null,{default:s(()=>[l(f,{xs:"1",sm:"3"},{default:s(()=>[vt]),_:1}),l(f,null,{default:s(()=>[$(x("input",{type:"range",max:"1",min:"0",step:"0.05",color:"blue","onUpdate:modelValue":o[1]||(o[1]=u=>ee(a)?a.value=u:null)},null,512),[[E,L(a)]])]),_:1})]),_:1}),l(V,null,{default:s(()=>[l(f,{sm:"3"},{default:s(()=>[wt]),_:1}),l(f,null,{default:s(()=>[$(x("input",{type:"range",min:"0",max:"1080",step:"5",color:"blue","onUpdate:modelValue":o[2]||(o[2]=u=>ee(n)?n.value=u:null)},null,512),[[E,L(n)]])]),_:1})]),_:1}),l(V,null,{default:s(()=>[l(f,{sm:"3"},{default:s(()=>[xt]),_:1}),l(f,null,{default:s(()=>[$(x("input",{type:"range",min:"0",max:"1080",step:"5",color:"blue","thumb-label":"","onUpdate:modelValue":o[3]||(o[3]=u=>ee(e)?e.value=u:null)},null,512),[[E,L(e)]])]),_:1})]),_:1})],64))}},St=S("update histogram"),_t={props:["selectedSprite"],setup(i){const t=_.map(_.range(256),e=>0),a=O([t,t,t,t]);function n(){a.value=H(engine.histogram())}return(e,r)=>(h(),N(T,null,[l(se,{data:a.value},null,8,["data"]),l(G,{color:"green",onClick:n},{default:s(()=>[St]),_:1})],64))}},bt={props:["selectedSprite"],setup(i){const t=O(0),a=H([{title:"params",value:0},{title:"gradient transformations",value:1}]);return(n,e)=>i.selectedSprite?(h(),k(ie,{key:0},{default:s(()=>[l(ne,null,{default:s(()=>[l(Z,{label:"window",items:L(a),modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value=r),"hide-details":""},null,8,["items","modelValue"]),l(me,{style:{margin:"10px 0px"}}),t.value==0?(h(),k(yt,{key:0,selectedSprite:i.selectedSprite},null,8,["selectedSprite"])):t.value==1?(h(),k(_t,{key:1,selectedSprite:i.selectedSprite},null,8,["selectedSprite"])):K("",!0)]),_:1})]),_:1})):K("",!0)}},Vt=S(" options "),It={emits:"switchDrawer",setup(i,{emit:t}){function a(){engine.downImg()}const n=H([{title:"download",func:a}]);function e(o){o.func&&o.func()}function r(){t("switchDrawer")}return(o,u)=>(h(),k(Pe,{"extension-height":"40"},{prepend:s(()=>[l(Ie,{onClick:r})]),append:s(()=>[]),default:s(()=>[l(De,null,{default:s(()=>[l(Ce,null,{activator:s(({props:m})=>[l(G,ke({color:"primary"},m),{default:s(()=>[Vt]),_:2},1040)]),default:s(()=>[l(Ue,null,{default:s(()=>[(h(!0),N(T,null,pe(L(n),(m,y)=>(h(),k($e,{key:y,value:m},{default:s(()=>[l(Ee,{onClick:v=>e(m)},{default:s(()=>[S(Q(m.title),1)]),_:2},1032,["onClick"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}};var Ct=(i,t)=>{const a=i.__vccOpts||i;for(const[n,e]of t)a[n]=e;return a};const kt={components:{spriteList:gt,spriteEdit:ct,LayerEdit:bt,bar:It,Histogram:se},data(){return{imgs:[],selectedSprite:void 0,drawer:!1}},methods:{selectSprite(i){this.selectedSprite=i,this.drawer=!1},switchDrawer(){this.drawer=!!(1-this.drawer)}},mounted(){engine=new Me(document.getElementById("window"),this.imgs),this.engine=engine,vm=this}},Ut=x("div",{id:"window"},null,-1);function Dt(i,t,a,n,e,r){const o=Y("bar"),u=Y("sprite-list"),m=Y("layer-edit"),y=Y("sprite-edit");return h(),k(Ne,null,{default:s(()=>[l(o,{onSwitchDrawer:r.switchDrawer},null,8,["onSwitchDrawer"]),l(Le,{modelValue:e.drawer,"onUpdate:modelValue":t[0]||(t[0]=v=>e.drawer=v),absolute:"",bottom:"",temporary:""},{default:s(()=>[l(u,{sprites:e.imgs,onSelectSprite:r.selectSprite,selectedSprite:e.selectedSprite},null,8,["sprites","onSelectSprite","selectedSprite"])]),_:1},8,["modelValue"]),l(Ae,null,{default:s(()=>[l(V,null,{default:s(()=>[l(f,{sm:"8"},{default:s(()=>[Ut]),_:1}),l(f,{sm:"4",style:{height:"89vh","overflow-y":"auto"}},{default:s(()=>{var v;return[((v=e.selectedSprite)==null?void 0:v.type)=="layer"?(h(),k(m,{key:0,selectedSprite:e.selectedSprite},null,8,["selectedSprite"])):(h(),k(y,{key:1,selectedSprite:e.selectedSprite},null,8,["selectedSprite"])),l(u,{sprites:e.imgs,onSelectSprite:r.selectSprite,selectedSprite:e.selectedSprite},null,8,["sprites","onSelectSprite","selectedSprite"])]}),_:1})]),_:1})]),_:1})]),_:1})}var Pt=Ct(kt,[["render",Dt]]);var $t=Te();const Et="modulepreload",de={},Nt="./",Lt=function(t,a){return!a||a.length===0?t():Promise.all(a.map(n=>{if(n=`${Nt}${n}`,n in de)return;de[n]=!0;const e=n.endsWith(".css"),r=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const o=document.createElement("link");if(o.rel=e?"stylesheet":Et,e||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),e)return new Promise((u,m)=>{o.addEventListener("load",u),o.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};async function At(){(await Lt(()=>import("./webfontloader.cd097671.js").then(function(t){return t.w}),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}At();Be(Pt).use($t,{},!1,"bootstrap3").mount("#app");
